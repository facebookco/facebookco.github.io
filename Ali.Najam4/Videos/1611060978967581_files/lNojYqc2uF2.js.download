if (self.CavalryLogger) { CavalryLogger.start_js(["Hwvbr"]); }

__d("FBFeedLocations",[],(function a(b,c,d,e,f,g){f.exports={NEWSFEED:1,GROUP:2,GROUP_PERMALINK:3,COMMUNITY:4,PERMALINK:5,SHARE_OVERLAY:6,PERMALINK_STREAM:7,GROUP_PINNED:8,FRIEND_LIST:9,TIMELINE:10,HASHTAG_FEED:11,TOPIC_FEED:12,PAGE:13,NOTIFICATION_FEED:14,GROUP_REPORTED:15,GROUP_PENDING:16,PAGES_FEED_IN_PAGES_MANAGER:17,TICKER_CLASSIC:18,PAGES_SUGGESTED_FEED_IN_PAGES_MANAGER:19,SEARCH:20,GROUP_SEARCH:21,NO_ATTACHMENT:22,EMBED:23,EMBED_FEED:24,ATTACHMENT_PREVIEW:25,STORIES_TO_SHARE:26,PROMPT_PERMALINK:27,TREND_HOVERCARD:28,OPEN_GRAPH_PREVIEW:30,HOTPOST_IN_PAGES_FEED:31,SCHEDULED_POSTS:32,TIMELINE_NOTES:33,PAGE_INSIGHTS:34,COMMENT_ATTACHMENT:35,PAGE_TIMELINE:36,GOODWILL_THROWBACK_PERMALINK:37,LIKE_CONFIRM:39,GOODWILL_THROWBACK_PROMOTION:40,BROWSE_CONSOLE:42,GROUP_FOR_SALE_COMPACT:43,ENTITY_FEED:44,GROUP_FOR_SALE_DISCUSSION:45,PAGES_CONTENT_TAB_PREVIEW:46,GOODWILL_THROWBACK_SHARE:47,TIMELINE_VIDEO_SHARES:48,EVENT:49,PAGE_PLUGIN:50,SRT:51,PAGES_CONTENT_TAB_INSIGHTS:52,ADS_PE_CONTENT_TAB_INSIGHTS:53,PAGE_ACTIVITY_FEED:54,VIDEO_CHANNEL:55,POST_TO_PAGE:56,GROUPS_GSYM_HOVERCARD:57,GROUP_POST_TOPIC_FEED:58,FEED_SURVEY:59,PAGES_MODERATION:60,SAVED_DASHBOARD:61,PULSE_SEARCH:62,GROUP_NUX:63,GROUP_NUX_POST_VIEW:64,EVENT_PERMALINK:65,FUNDRAISER_PAGE:66,EXPLORE_FEED:67,CRT:68,REVIEWS_FEED:69,VIDEO_HOME_CHANNEL:70,NEWS:71,TIMELINE_FRIENDSHIP:72,SAVED_REMINDERS:73,PSYM:74,ADMIN_FEED:75,CAMPFIRE_NOTE:76,PAGES_CONTEXT_CARD:77,ACTIVITY_LOG:78,WALL_POST_REPORT:79,TIMELINE_BREAKUP:80,POLITICIANS_FEED:81,PRODUCT_DETAILS:82,SPORTS_PLAY_FEED:83,GROUP_TOP_STORIES:84,PAGE_TIMELINE_PERMALINK:86,OFFERS_WALLET:87,INSTREAM_VIDEO_IN_LIVE:88,SPOTLIGHT:89,SEARCH_DERP:90,SOCIAL_BALLOT:91,GROUP_SUGGESTIONS_WITH_STORY:92,SOCIAL_BALLOT_PERMALINK:93,LOCAL_SERP:94,FUNDRAISER_SELF_DONATION_FEED:95,CONVERSATION_NUB:97,GROUP_TOP_SALE_STORIES:98,GROUP_LEARNING_COURSE_UNIT_FEED:99,SUPPORT_INBOX_READ_TIME_BLOCK:100,PAGE_POSTS_CARD:101,CRISIS_POST:102,SUPPORT_INBOX_GROUP_RESPONSIBLE:103,PAGE_POST_DIALOG:104,CRISIS_DIALOG_POST:105,PAGE_LIVE_VIDEOS_CARD:106,PAGE_POSTS_CARD_COMPACT:107,GROUP_MEMBER_BIO_FEED:108,LIVE_COMMENT_ATTACHMENT:109,GROUP_COMPOSER:110,GROUP_INBOX_GROUP:111,GROUP_INBOX_AGGREGATED:112,ENDORSEMENTS:113,EVENTS_DASHBOARD:114,CURATED_COLLECTIONS_PAGE:115,OYML:116,COLLEGE_HOMEPAGE:117,GROUP_LIVE_VIDEOS_CARD:118,COLLEGE_HIGHLIGHTS:119,VIDEO_PERMALINK:120,JOB_CAROUSEL_NETEGO:121,TOPIC_PAGE:122,USER_SCHEDULED_POSTS:123,GOODWILL_THROWBACK_ATTACHMENT_PREVIEW:124,INSTREAM_VIDEO_IN_WASLIVE:125,INSTREAM_VIDEO_IN_NONLIVE:126,SIGNAL_APP:127,ALBUM_FEED:128,TOP_MARKETPLACE_STORIES:129,CE_PII_STRIPPED_FEED:130,TAHOE:131,SAVE_COUNT_DIALOG:132,GROUP_POST_TAG_FEED:133,GOV_DIGEST:134,GROUP_SCHEDULED:135,GAMEROOM_FEED:136,WORKPLACE_HUB_PREVIEW:137,BRANDED_CONTENT_TRENDING_POSTS:138,GROUP_ANNOUNCEMENTS:139,GROUP_ANNOUNCEMENTS_FEED:140,EXTERN_CE_PII_STRIPPED_FEED:141,CRISIS_HUB_DESKTOP:142,GROUP_DRAFT_POSTS:143,TRENDING_ISSUES:144};}),null);
__d("XFeedNUXSaveSeenStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false},env:{type:"Enum",enumType:0}});}),null);
__d('MFeedNUXTooltip',['DOM','MRequest','MViewport','Stratcom','SubscriptionsHandler','XFeedNUXSaveSeenStateController','destroyOnUnload','mixInEventEmitter'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={},q=void 0,r={},s=void 0,t=0,u=100,v=1,w=0;function x(){q=k.listen('scroll',null,z);n(y);}function y(){if(q)q.remove();q=null;window.clearTimeout(s);s=null;}function z(){var ca=j.getHeight();if(s){window.clearTimeout(s);s=null;}for(var da in p){var ea=p[da],fa=ea.getNodes(),ga=ea.getHeadRoom();for(var ha=0;ha<fa.length;ha++){var ia=fa[ha].getBoundingClientRect();if(ia.top>=ga&&ia.bottom<=ca){aa(fa[ha],ea);break;}}}}function aa(ca,da){s=window.setTimeout(function(){if(da.getContext()!==ca){da.setContext(ca);da.show();}},t);}function ba(ca,da,ea,fa){'use strict';if(!p.length)x();if(p[da]||r[da]){ea.destroy();return;}this.$MFeedNUXTooltip1=da;this.$MFeedNUXTooltip2=h.scry(document.getElementById('page'),'*',ca);this.$MFeedNUXTooltip3=ca;this.$MFeedNUXTooltip4=w;this.$MFeedNUXTooltip5=ea;this.$MFeedNUXTooltip6=fa===0?0:fa||u;p[da]=this;var ga=new l();ga.addSubscriptions(this.$MFeedNUXTooltip5.addListener('show',this.emit.bind(this,'show')),this.$MFeedNUXTooltip5.addListener('hide',function(){this.emit('hide');ga.release();}.bind(this)));z();}ba.prototype.destroy=function(){'use strict';delete p[this.$MFeedNUXTooltip1];if(!Object.keys(p).length)y();};ba.prototype.getContext=function(){'use strict';return this.$MFeedNUXTooltip5.getContext();};ba.prototype.getNodes=function(){'use strict';return this.$MFeedNUXTooltip2;};ba.prototype.getHeadRoom=function(){'use strict';return this.$MFeedNUXTooltip6;};ba.prototype.getIsUnseen=function(){'use strict';return this.$MFeedNUXTooltip4===w;};ba.prototype.setContext=function(ca){'use strict';this.$MFeedNUXTooltip5&&this.$MFeedNUXTooltip5.setContext(ca);};ba.prototype.show=function(){'use strict';if(!this.$MFeedNUXTooltip5||this.$MFeedNUXTooltip4===v)return;r[this.$MFeedNUXTooltip1]=true;this.$MFeedNUXTooltip4=v;this.$MFeedNUXTooltip5.show();var ca=m.getURIBuilder().setString('key',this.$MFeedNUXTooltip1).setBool('seen',true);new i(ca.getURI()).setMethod('POST').send();this.destroy();};ba.prototype.hide=function(){'use strict';this.$MFeedNUXTooltip5&&this.$MFeedNUXTooltip5.hide();};o(ba,{show:true,hide:true});f.exports=ba;}),null);
__d('MFeedReactionsNUX',['BanzaiLogger','MLegacyDataStore','MLiveData','Stratcom','SubscriptionsHandler','requestAnimationFrame'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';function n(p,q){var r,s=q&&q.isCommentNUX;if(p)(function(){var t=new l();t.addSubscriptions(k.listen('click','like-reaction-flyout',function(u){var v,w=u.getNode('like-reaction-flyout'),x=u.getNode('feed-ufi-comments');if(!w||x)return;var y=i.get(w);if(s&&!y.isComment||!s&&y.isComment)return;var z=y.feedback_target||y.feedbackTarget;if(z)(function(){var aa=j.get(z);t.addSubscriptions(aa.listen('change',function(){if(aa.getData().has_viewer_liked)m(function(){p.setContext(u.getTarget());p.show();o(z);});}));})();}),p.once('hide',function(){t.release();}));if(!s)t.addSubscriptions(k.listen('click','reactions-bling-bar',function(u){var v=u.getNode('mufi-inline').querySelector('a[data-sigil*="like-reaction-flyout"]');if(v){var w=u.getNode('feed-ufi-metadata'),x=i.get(w).feedback_target.toString();o(x);p.setContext(v);p.show();u.kill();}}));k.listen('m:page:unload',null,function(){k.removeCurrentListener();t.release();});})();}function o(p){h.log('WebReactionsNuxLoggerConfig',{feedback_id:p,'interface':'mTouch'});}f.exports.init=n;}),null);
__d('MEntstreamViewportTracking',['Banzai','DOM','FBFeedLocations','FBJSON','MViewport','MViewportTracking','DataAttributeUtils','StratcomManager','Vector'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';var q,r,s=51;q=babelHelpers.inherits(t,m);r=q&&q.prototype;t.init=function(u){o.enableDispatch(document,'scroll');new t().init(u);};t.prototype.getDataFromConfig=function(u){this.isLoose=true;this.isTimeTrackingEnabled=!!u.vpvd_logging;this.shouldWaterfallLogging=!!u.should_waterfall_logging;};t.prototype.__getStreamRoot=function(){if(!this.$MEntstreamViewportTracking1)this.$MEntstreamViewportTracking1=document.getElementById('root');return this.$MEntstreamViewportTracking1;};t.prototype.getFBFeedLocation=function(){return j.NEWSFEED;};t.prototype.getAllStories=function(){return i.scry(this.__getStreamRoot(),'article','story-div');};t.prototype.getTimeout=function(){return 300;};t.prototype.getDataToLog=function(u){var v=Object.assign(k.parse(u.getAttribute('data-ft'),f.id),{evt:s});if(!this.isTimeTrackingEnabled){var w=i.scry(u,'*','data-is-cta').map(function(aa){var ba=n.getDataFt(aa),ca=ba&&JSON.parse(ba);return ca&&ca.cta_types;}).filter(function(aa){return !!aa;});v.cta_types=w;}var x,y,z;if('getBoundingClientRect' in u){x=u.getBoundingClientRect();y=x.height;z=x.top+l.getScrollTop();}else{y=p.getDim(u).y;z=p.getPos(u).y;}v.evt_value=y;v.offset=z;v.story_height=y;v.impression_type=l.isLandscape()?'landscape':'portrait';if(this.shouldWaterfallLogging){v.should_waterfall_logging=1;v['interface']='m_touch';}return v;};t.prototype.getWaterfallData=function(u,v){var w=this.getDataToLog(u);w.step=v;return w;};t.prototype.getStoryID=function(u){var v=u.getAttribute('data-ft');if(!v)return null;return k.parse(v,f.id).mf_story_key;};t.prototype.sendDataToLog=function(u){h.post('feed_tracking',{ft:u});};function t(){q.apply(this,arguments);}f.exports=t;}),null);
__d("XUFIReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},is_inline:{type:"Bool",defaultValue:false},is_comment:{type:"Bool",defaultValue:false},is_permalink:{type:"Bool",defaultValue:false},action_source:{type:"String"},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},on_demand_content_time_offset:{type:"Int"},live_content_time_offset:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}});}),null);
__d('MReactionsFlyout',['ActorURI','BanzaiLogger','CSS','DOM','MLegacyDataStore','MLiveData','MParent','MUFIConfig','MUFIReactionsUtils','MUFIRequest','Stratcom','SubscriptionsHandler','TouchEventType','URI','XUFIReactionController','cx','fbt'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y=[1,2,4,3,7,8],z=17;function aa(da){'use strict';ba.call(this);this.flyout=da;this.active=null;this.canScroll=true;this.canScrub=false;this.clickCaptureListener=null;this.preventScrollTimeout=null;this.longpressTimeout=null;this.nuxTooltip=null;this.overlay=null;this.reactionElements=document.getElementsByClassName("_1-kd");this.timing={};this.touchStartX=0;this.isUpdatedDock=o.hasUpdatedDock;this.pageSubscriptions=new s();this.flyoutSubscriptions=new s();this.pageSubscriptions.addSubscriptions(da.addListener('hide',this.onHide),r.listen('m:page:unload',null,this.onUnload),r.listen('m:viewport:orientation-change',null,this.onHide),r.listen(t.END,null,this.onWindowTouchEnd),r.listen(t.START,'like-reaction-flyout',this.onTouchStart),r.listen('click','screenreader-reactions-trigger',this.onScreenReaderTrigger));if(o.hasIEMobileFixes){this.pageSubscriptions.addSubscriptions(r.listen('touchcancel',null,this.onWindowTouchEnd));}else this.pageSubscriptions.addSubscriptions(r.listen('touchmove',null,this.onWindowTouchMove));}aa.prototype.setupFlyout=function(da,ea){'use strict';var fa=l.get(ea);da.setContext(ea);this.setSupported();var ga=this.nuxTooltip;if(ga)ga.hide();var ha=da.getContentRoot(),ia=n.bySigil(ha,'m-layer-root');if(ia){if(this.isUpdatedDock&&!fa.isComment){this.applyMultilineFlyout();j.addClass(ia,"_5xt_");}if(fa.isComment)j.addClass(ia,"_31rl");}da.show();this.createUFIOverlay();this.isUpdatedDock||fa.isComment?this.showOverlay(this.overlay&&this.overlay.tap):this.showOverlay(this.overlay&&this.overlay.dots);this.flyoutSubscriptions.addSubscriptions(r.listen('click','reaction-item',this.onClick),r.listenCapture('click','like-reaction-flyout',this.onClickCapture),r.listenCapture('click',null,this.onWindowClick));if(!o.hasIEMobileFixes)this.flyoutSubscriptions.addSubscriptions(r.listen('touchend','like-reaction-flyout',this.onTouchEnd),r.listen('touchend','reaction-item',this.onTouchEnd),r.listen('touchmove','like-reaction-flyout',this.onTouchMove),r.listen('touchmove','reaction-item',this.onTouchMove));};aa.prototype.select=function(da){'use strict';var ea=this.flyout;ea.hide();var fa=l.get(da),ga=fa.reaction,ha=ea.getContext(),ia=l.get(ha),ja=ia.feedbackTarget,ka=ia.isComment,la=m.get(ja).getData();if(la.viewerreaction===ga)return;if(ka){var ma=ha.getAttribute('data-uri')||ha.getAttribute('href'),na=q.getURI(ma);na.addQueryData('reaction_comment_id',ja.split('_')[1]);na.addQueryData('viewer_reaction',ga);q.send(ja,p.getReactionDataForComment(la,ga),na);}else{var oa,pa=la.actor_for_post;if(pa!==0&&!pa)pa=null;var qa=n.bySigil(ha,'story-div');q.send(ja,p.getReactionData(la,ga,pa),v.getURIBuilder().getURI(),(oa={},oa[h.PARAMETER_ACTOR]=pa,oa.$MReactionsFlyout1=qa?l.get(qa).linkdata:null,oa.ft_ent_identifier=ja,oa.reaction_type=ga,oa.feedback_source=new u(ha.getAttribute('data-uri')).getQueryData().feedback_source,oa));}};aa.prototype.onClickCapture=function(event){'use strict';event.stop();};aa.prototype.removeActive=function(){'use strict';var da=this.active;if(da){this.active=null;da.removeAttribute('data-active');}};aa.prototype.applyMultilineFlyout=function(){'use strict';var da=this.flyout,ea=da.getContext(),fa=n.bySigil(ea,'mufi-inline'),ga=da.getContentRoot(),ha=k.scry(fa,'div','reactions-bling-bar');if(ha.length==0){j.addClass(ga,"_5xu1");return;}var ia=ha[0].getBoundingClientRect().height;if(ia>z){j.addClass(ga,"_5xu0");}else if(ia<z){j.addClass(ga,"_5xu1");}else{j.removeClass(ga,"_5xu0");j.removeClass(ga,"_5xu1");}};aa.prototype.showOverlay=function(da){'use strict';var ea=this.overlay;if(ea){j.show(da);for(var fa in ea){var ga=ea[fa];if(ga!=da&&ga!=ea.container)j.hide(ga);}}};aa.prototype.log=function(da){'use strict';var ea=m.get(l.get(this.flyout.getContext()).feedbackTarget).getData(),fa=ea.ft_ent_identifier,ga=ea.viewerreaction,ha=this.timing,ia=ha.touchEndTime,ja=ha.touchStartTime,ka=ia-ja;i.log('UserReactionsLoggerConfig',{feedback_id:fa,final_reaction:da.finalReaction||ga,initial_reaction:ga,'interface':'mTouch',long_press_duration:ka>0?ka:0,time_spent:Date.now()-ha.shownTime,via_scrubbing:da.viaScrubbing});};aa.prototype.createUFIOverlay=function(){'use strict';var da=this.flyout.getContext(),ea=l.get(da),fa=ea.feedbackTarget,ga=ea.isComment,ha=m.get(fa).getData().supportedreactions||y,ia=document.createElement('div');ia.style.display='none';ia.className="_403o";var ja=Math.round(ha.length*1.3);for(var ka=0;ka<ja;++ka){var la=document.createElement('div');la.className="_403p";ia.appendChild(la).className="_403p";}var ma=document.createElement('div');ma.style.display='none';ma.className="_5xu2";ma.textContent=x._("Tap to Pick Your Reaction");var na=document.createElement('div');na.style.display='none';na.className="_5xu2";na.textContent=x._("Slide Finger Across");var oa=document.createElement('div');oa.style.display='none';oa.className="_5xu2";oa.textContent=x._("Release to Cancel");var pa=document.createElement('div');pa.className="_403n";if(ga)j.addClass(pa,"_31ru");pa.appendChild(ia);pa.appendChild(oa);if(this.isUpdatedDock||ga){pa.appendChild(ma);pa.appendChild(na);}var qa=n.bySigil(da,'ufi-inline-actions');if(!qa)qa=n.bySigil(da,'ufi-inline-comment-actions');if(qa){qa.insertBefore(pa,qa.firstChild);this.overlay={container:pa,tap:ma,slide:na,release:oa,dots:ia};}else this.overlay=null;};aa.prototype.removeUFIOverlay=function(){'use strict';var da=this.overlay;if(da){var ea=da.container;ea.parentNode.removeChild(ea);this.overlay=null;}};aa.prototype.setSupported=function(){'use strict';var da=l.get(this.flyout.getContext()),ea=m.get(da.feedbackTarget).getData().supportedreactions||y,fa=this.reactionElements;for(var ga=0,ha=fa.length;ga<ha;++ga){var ia=fa[ga],ja=l.get(ia),ka=ja.reaction;j.conditionShow(ia,ea.indexOf(ka)>=0);}};aa.prototype.setNUXTooltip=function(da){'use strict';this.nuxTooltip=da;};var ba=function da(){this.onUnload=function(){this.onHide();this.pageSubscriptions.release();this.pageSubscriptions=null;}.bind(this);this.onClick=function(event){this.select(event.getNode('reaction-item'));}.bind(this);this.onScreenReaderTrigger=function(event){var ea=event.getTarget().previousSibling;if(!ea)return;this.flyout.setContext(ea);this.setSupported();this.flyout.show();this.flyoutSubscriptions.addSubscriptions(r.listen('click','reaction-item',this.onClick));var fa=m.get(l.get(this.flyout.getContext()).feedbackTarget).getData(),ga=fa.viewerreaction,ha=null;for(var ia=0,ja=this.reactionElements.length;ia<ja;ia++){var ka=l.get(this.reactionElements[ia]),la=ka.reaction;if(la===ga)ha=this.reactionElements[ia];}if(!ha)ha=this.reactionElements[0];ha.focus();}.bind(this);this.onTouchStart=function(event){var ea=this.flyout;if(!ea.isShown()){this.touchStartX=event.getTouch().clientX;this.timing.touchStartTime=Date.now();this.preventScrollTimeout=setTimeout(function(){this.canScroll=false;}.bind(this),200);this.longpressTimeout=setTimeout(function(){this.timing.shownTime=Date.now();var fa=event.getTarget();if(!r.hasSigil(fa,'like-reaction-flyout'))fa=n.bySigil(fa,'like-reaction-flyout');this.setupFlyout(ea,fa);}.bind(this),300);}}.bind(this);this.onTouchMove=function(event){var ea=this.flyout,fa=l.get(ea.getContext()),ga=fa.isComment;if(!this.canScroll)ga?event.kill():event.prevent();var ha=event.getRawEvent().touches[0],ia=ha.clientX,ja=ha.clientY,ka=document.elementFromPoint(ia,ja);if(ka){var la=ka.nodeName==='I';if(!(la||this.canScrub)){this.canScrub=Math.abs(this.touchStartX-ia)>=25;return;}ea.getContentRoot().setAttribute('data-longpress',true);if(ea.getContentRoot().contains(ka)){if(la)ka=ka.parentNode.parentNode;if(this.active!==ka&&l.get(ka).reaction){this.isUpdatedDock||ga?this.showOverlay(this.overlay&&this.overlay.slide):this.showOverlay(this.overlay&&this.overlay.dots);this.removeActive();this.active=ka;ka.setAttribute('data-active',true);}}else if(!this.overlay||!this.overlay.container.contains(ka)){this.removeActive();this.showOverlay(this.overlay&&this.overlay.release);}}}.bind(this);this.onTouchEnd=function(event){var ea=this.active;if(ea){this.log({finalReaction:l.get(ea).reaction,viaScrubbing:true});this.select(ea);}else{var fa=event.getTouch(),ga=fa.clientX,ha=fa.clientY,ia=document.elementFromPoint(ga,ha),ja=this.flyout;if(ia&&!(ja.getContentRoot().contains(ia)||ja.getContext().contains(ia)||this.overlay&&this.overlay.container.contains(ia)))ja.hide();}}.bind(this);this.onWindowClick=function(event){var ea=void 0,fa=event.getNode('reaction-item');if(fa)ea=l.get(fa).reaction;this.log({finalReaction:ea,viaScrubbing:false});}.bind(this);this.onWindowTouchEnd=function(){var ea=this.flyout;if(ea.isShown()){this.timing.touchEndTime=Date.now();ea.getContentRoot().removeAttribute('data-longpress');}else{this.canScroll=true;clearTimeout(this.longpressTimeout);clearTimeout(this.preventScrollTimeout);}}.bind(this);this.onHide=function(){this.canScroll=true;this.canScrub=false;this.removeActive();this.removeUFIOverlay();this.flyout.hide();this.flyoutSubscriptions.release();this.flyoutSubscriptions=new s();}.bind(this);this.onWindowTouchMove=function(){if(!this.flyout.isShown()){this.canScroll=true;clearTimeout(this.longpressTimeout);clearTimeout(this.preventScrollTimeout);}}.bind(this);},ca=void 0;f.exports={init:function da(ea){ca=new aa(ea);},initNUX:function da(ea){if(ca)ca.setNUXTooltip(ea);}};}),null);
__d("XStoryChevronController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/story_chevron_menu\/",{feedobjects_identifiers:{type:"String"},feed_context:{type:"String"},chevron_button_id:{type:"String"},story_node_id:{type:"String"},zombie_story:{type:"String"},is_menu_registered:{type:"Bool",defaultValue:false},outer_story_token:{type:"String"}});}),null);
__d("requireWeak",[],(function a(b,c,d,e,f,g){function h(i,j){e&&e.call(null,[i],j);}f.exports=h;}),null);
__d('MAsyncChevronMenu',['$','cx','CSS','requireWeak','BanzaiODS','MLegacyDataStore','DOM','MParent','MRequest','MTouchClick','Stratcom','SubscriptionsHandler','XStoryChevronController'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=null;k('MHideStoryActions',function(ia){return u=ia;});var v,w,x,y,z,aa;function ba(ia){var ja=o.bySigil(ia,'story-popup-metadata');return ja;}function ca(){l.bumpEntityKey('mtouch_async_chevron','chevron_clicked');var ia=this.getCausalElement(),ja=m.get(ia),ka=ba(ia),la=t.getURIBuilder().setBool('is_menu_registered',!!(u&&u.getActionBubble())).getURI(),ma=new p(la);y&&j.show(y);z&&j.hide(z);aa&&j.hide(aa);v=ka;ma.setMethod('POST');ma.setData({feedobjects_identifiers:ja.feedobjectsIdentifiers,feed_context:ja.feedContext,zombie_story:ja.zombieStoryURI?ja.zombieStoryURI:'',story_node_id:ka&&ka.id,chevron_button_id:ia.id,outer_story_token:ja.outerStoryToken?ja.outerStoryToken:''});ma.listen('error',function(na){l.bumpEntityKey('mtouch_async_chevron','request_failed');y&&j.hide(y);if(na=='status=0'){l.bumpEntityKey('mtouch_async_chevron','request_failed_no_internet_connection');z&&j.show(z);aa&&j.hide(aa);}else{l.bumpEntityKey('mtouch_async_chevron','request_failed_server_side_error');aa&&j.show(aa);z&&j.hide(z);}});ma.listen('done',function(){l.bumpEntityKey('mtouch_async_chevron','request_done');});ma.send();}function da(){if(x){x.release();x=null;}w=null;y=null;z=null;aa=null;}function ea(ia){if(w){w.destroy();da();}w=ia;var ja=ia.getContentRoot();y=n.find(ja,'div','loadingWrapper');z=n.find(ja,'div','noConnectionWrapper');aa=n.find(ja,'div','requestErrorWrapper');x=new s();x.addSubscriptions(w.addListener('beforeshow',ca,w),r.listen('m:page:unload',null,da),r.listen('m:story:action-bubble-initialized',null,function(ka){var la=ka.getData();if(la.menuNubID)fa(h(la.menuNubID),la.wasOpen,la.serverContext);}));}function fa(ia,ja,ka){if(!w||!(w.isShown()||ja))return;if(!u||!u.getActionBubble())return;w.hide();if(ka)m.set(ia,{serverContext:ka});var la=ba(ia);if(v==la){var ma=ia.getElementsByClassName("_4s19")[0];q.click(ma);}}function ga(ia,ja,ka,la,ma){n.replace(h(ja),ia);if(!ma)fa(ia,false,la);}function ha(ia){if(!v||v.id==ia){w&&w.hide();v=null;}}f.exports={init:ea,replaceChevronTrigger:ga,closeLoadingFlyout:ha};}),null);
__d('MLayerHideOnTouch',['Stratcom','TouchEventType'],(function a(b,c,d,e,f,g,h,i){function j(k){'use strict';this.$MLayerHideOnTouch1=null;this.$MLayerHideOnTouch2=k;}j.prototype.enable=function(){'use strict';this.$MLayerHideOnTouch1=[this.$MLayerHideOnTouch2.addListener('show',this.$MLayerHideOnTouch3.bind(this)),this.$MLayerHideOnTouch2.addListener('hide',this.$MLayerHideOnTouch4.bind(this))];if(this.$MLayerHideOnTouch2.isShown())this.$MLayerHideOnTouch3();};j.prototype.disable=function(){'use strict';this.$MLayerHideOnTouch4();while(this.$MLayerHideOnTouch1.length)this.$MLayerHideOnTouch1.pop().remove();this.$MLayerHideOnTouch1=null;};j.prototype.$MLayerHideOnTouch4=function(){'use strict';this.$MLayerHideOnTouch5&&this.$MLayerHideOnTouch5.remove();this.$MLayerHideOnTouch5=null;};j.prototype.$MLayerHideOnTouch3=function(){'use strict';this.$MLayerHideOnTouch5=h.listen(i.START,null,function(event){if(!this.$MLayerHideOnTouch2.getContentRoot().contains(event.getTarget())){this.$MLayerHideOnTouch2.hide();event.prevent();}}.bind(this));};f.exports=j;}),null);